<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Expires" content="86400">
        <link rel="stylesheet" type="text/css" href="../css/layout.css">
        <link rel="stylesheet" href="../css/classic.min.css">
        <link rel="apple-touch-icon" sizes="180x180" href="../image/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="../image/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="../image/favicon/favicon-16x16.png">
        <link rel="manifest" href="../image/favicon/site.webmanifest">
        <link rel="mask-icon" href="../image/favicon/safari-pinned-tab.svg" color="#ff6a00">
        <link rel="shortcut icon" href="../image/favicon/favicon.ico">
        <meta name="apple-mobile-web-app-title" content="ORIZIN Agent">
        <meta name="application-name" content="ORIZIN Agent">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="msapplication-config" content="../image/favicon/browserconfig.xml">
        <meta name="theme-color" content="#2a1100">
        <title>ORIZIN Agent</title>
        <meta name="description" content="オープンソースのAIアシスタント「ORIZIN_Agent」です。">
    </head>
    <body>
        <header>
        </header>
        <main>
            <div class="fill_panel">
                <h2>カスタムCSSテーマの設定</h2>
                <ul>
                    <li>背景色<div id="bg"></div></li>
                    <li>カードの背景色<div id="card_bg"></div></li>
                    <li>文字色<div id="text"></div></li>
                    <li>影の色<div id="shadow"></div></li>
                    <li>テーマ色<div id="theme_color"></div></li>
                </ul>
            </div>
        </main>
        <script src="../javascript/jquery-3.5.1.min.js"></script>
        <script src="../javascript/basic.js"></script>
        <script src="../javascript/ripple.min.js"></script>
        <script src="../javascript/pickr.min.js"></script>
        <script src="/eel.js"></script>
        <script>
            css_data = [];
            old_css_data = [];
            async function check_current_css_theme_information() {
                css_data =  await eel.check_current_css_theme_information()();
                old_css_data = await eel.check_current_css_theme_information()();
                const bg = Pickr.create({
                    el: "#bg",
                    theme: "classic",
                    default: css_data[0],
                    swatches: [
                        "rgba(244, 67, 54, 1)",
                        "rgba(233, 30, 99, 0.95)",
                        "rgba(156, 39, 176, 0.9)",
                        "rgba(103, 58, 183, 0.85)",
                        "rgba(63, 81, 181, 0.8)",
                        "rgba(33, 150, 243, 0.75)",
                        "rgba(3, 169, 244, 0.7)",
                        "rgba(0, 188, 212, 0.7)",
                        "rgba(0, 150, 136, 0.75)",
                        "rgba(76, 175, 80, 0.8)",
                        "rgba(139, 195, 74, 0.85)",
                        "rgba(205, 220, 57, 0.9)",
                        "rgba(255, 235, 59, 0.95)",
                        "rgba(255, 193, 7, 1)"
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            hsla: true,
                            hsva: true,
                            cmyk: true,
                            input: true,
                            clear: true,
                            save: true,
                            cancel: true
                        }
                    },
                    i18n: {
                        "btn:save": "決定",
                        "btn:clear": "リセット",
                        "btn:cancel": "キャンセル"
                    }
                });
                bg.on("save", (color, instance) => {
                    css_data[0] = color.toHEXA().toString();
                    bg.hide();
                });
                const card_bg = Pickr.create({
                    el: "#card_bg",
                    theme: "classic",
                    default: css_data[1],
                    swatches: [
                        "rgba(244, 67, 54, 1)",
                        "rgba(233, 30, 99, 0.95)",
                        "rgba(156, 39, 176, 0.9)",
                        "rgba(103, 58, 183, 0.85)",
                        "rgba(63, 81, 181, 0.8)",
                        "rgba(33, 150, 243, 0.75)",
                        "rgba(3, 169, 244, 0.7)",
                        "rgba(0, 188, 212, 0.7)",
                        "rgba(0, 150, 136, 0.75)",
                        "rgba(76, 175, 80, 0.8)",
                        "rgba(139, 195, 74, 0.85)",
                        "rgba(205, 220, 57, 0.9)",
                        "rgba(255, 235, 59, 0.95)",
                        "rgba(255, 193, 7, 1)"
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            hsla: true,
                            hsva: true,
                            cmyk: true,
                            input: true,
                            clear: true,
                            save: true,
                            cancel: true
                        }
                    },
                    i18n: {
                        "btn:save": "決定",
                        "btn:clear": "リセット",
                        "btn:cancel": "キャンセル"
                    }
                });
                card_bg.on("save", (color, instance) => {
                    css_data[1] = color.toHEXA().toString();
                    card_bg.hide();
                });
                const text = Pickr.create({
                    el: "#text",
                    theme: "classic",
                    default: css_data[2],
                    swatches: [
                        "rgba(244, 67, 54, 1)",
                        "rgba(233, 30, 99, 0.95)",
                        "rgba(156, 39, 176, 0.9)",
                        "rgba(103, 58, 183, 0.85)",
                        "rgba(63, 81, 181, 0.8)",
                        "rgba(33, 150, 243, 0.75)",
                        "rgba(3, 169, 244, 0.7)",
                        "rgba(0, 188, 212, 0.7)",
                        "rgba(0, 150, 136, 0.75)",
                        "rgba(76, 175, 80, 0.8)",
                        "rgba(139, 195, 74, 0.85)",
                        "rgba(205, 220, 57, 0.9)",
                        "rgba(255, 235, 59, 0.95)",
                        "rgba(255, 193, 7, 1)"
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            hsla: true,
                            hsva: true,
                            cmyk: true,
                            input: true,
                            clear: true,
                            save: true,
                            cancel: true
                        }
                    },
                    i18n: {
                        "btn:save": "決定",
                        "btn:clear": "リセット",
                        "btn:cancel": "キャンセル"
                    }
                });
                text.on("save", (color, instance) => {
                    css_data[2] = color.toHEXA().toString();
                    text.hide();
                });
                const shadow = Pickr.create({
                    el: "#shadow",
                    theme: "classic",
                    default: css_data[3],
                    swatches: [
                        "rgba(244, 67, 54, 1)",
                        "rgba(233, 30, 99, 0.95)",
                        "rgba(156, 39, 176, 0.9)",
                        "rgba(103, 58, 183, 0.85)",
                        "rgba(63, 81, 181, 0.8)",
                        "rgba(33, 150, 243, 0.75)",
                        "rgba(3, 169, 244, 0.7)",
                        "rgba(0, 188, 212, 0.7)",
                        "rgba(0, 150, 136, 0.75)",
                        "rgba(76, 175, 80, 0.8)",
                        "rgba(139, 195, 74, 0.85)",
                        "rgba(205, 220, 57, 0.9)",
                        "rgba(255, 235, 59, 0.95)",
                        "rgba(255, 193, 7, 1)"
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            hsla: true,
                            hsva: true,
                            cmyk: true,
                            input: true,
                            clear: true,
                            save: true,
                            cancel: true
                        }
                    },
                    i18n: {
                        "btn:save": "決定",
                        "btn:clear": "リセット",
                        "btn:cancel": "キャンセル"
                    }
                });
                shadow.on("save", (color, instance) => {
                    css_data[3] = color.toHEXA().toString();
                    shadow.hide();
                });
                const theme_color = Pickr.create({
                    el: "#theme_color",
                    theme: "classic",
                    default: css_data[4],
                    swatches: [
                        "rgba(244, 67, 54, 1)",
                        "rgba(233, 30, 99, 0.95)",
                        "rgba(156, 39, 176, 0.9)",
                        "rgba(103, 58, 183, 0.85)",
                        "rgba(63, 81, 181, 0.8)",
                        "rgba(33, 150, 243, 0.75)",
                        "rgba(3, 169, 244, 0.7)",
                        "rgba(0, 188, 212, 0.7)",
                        "rgba(0, 150, 136, 0.75)",
                        "rgba(76, 175, 80, 0.8)",
                        "rgba(139, 195, 74, 0.85)",
                        "rgba(205, 220, 57, 0.9)",
                        "rgba(255, 235, 59, 0.95)",
                        "rgba(255, 193, 7, 1)"
                    ],
                    components: {
                        preview: true,
                        opacity: true,
                        hue: true,
                        interaction: {
                            hex: true,
                            rgba: true,
                            hsla: true,
                            hsva: true,
                            cmyk: true,
                            input: true,
                            clear: true,
                            save: true,
                            cancel: true
                        }
                    },
                    i18n: {
                        "btn:save": "決定",
                        "btn:clear": "リセット",
                        "btn:cancel": "キャンセル"
                    }
                });
                theme_color.on("save", (color, instance) => {
                    css_data[4] = color.toHEXA().toString();
                    theme_color.hide();
                });
            }

            check_current_css_theme_information();

            window.addEventListener("beforeunload", function() {
                if (old_css_data.toString() != css_data.toString()) {
                    eel.write_custom_css_theme(css_data);
                    eel.change_theme("theme/custom_theme.css");
                }
            });
        </script>
    </body>
</html>
